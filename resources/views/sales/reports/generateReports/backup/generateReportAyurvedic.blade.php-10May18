<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <style>
      .page-break {page-break-before: always;}
      @page { margin: 180px 20px;font-size:13px;}	
      #header {left: 0;position: fixed;right: 0;text-align: center;top: -180px;width: 100%;height:auto;}
      #footer {left: 0;position: fixed;right: 0;width: 100%;bottom:-220px;height: 115px;}
      #content {bottom: 0;height: auto;left: 0;right: 0;width: 100%;}
      #footer .page:after { content: counter(page, upper-roman); }
      .cntr_hdng h5,.cntr_hdng p {font-size: 13px;margin: 3px;font-weight: 700;color: #4d64a1;}
      .side_cntnt {width: 20%;border: 0px!important;font-size: 12px!important;color: #4d64a1;}
      .side_cntnt p {margin: 0;}
      td table td {padding:1px!important;border-bottom: 0px!important;}
      p{padding:2px 0px !important;margin:0!important;}
      #footer2 {position: fixed;left: 0; right: 0;  bottom: -10px;}
      .category{font-size:14px!important;padding:0 5px!important;font-weight:bold;}
      .parameter{font-size:13px!important;padding:0 5px!important;}
      .methodName{font-size:12px!important;padding:0 5px!important;}
      .equipmentName{font-size:12px!important;padding:0 5px!important;}
      .requirementName{font-size:12px!important;padding:0 5px!important;}
      .testResult{font-size:12px!important;padding:0 5px!important;overflow-wrap:break-word;word-wrap:break-word;}
      .bottom-sign{position: absolute;bottom: -40px;}
      .pdftable{table-layout:fixed;border-collapse: collapse;background: #fff;}
      .pdftable td {text-overflow:ellipsis;overflow:hidden;white-space:wrap;}
   </style>
</head>
<!--- header-->
<div id="header">
   <table width="100%" style="border-collapse:collapse;@if(!empty($hasContainHeaderFooter) && $hasContainHeaderFooter == '3')visibility: hidden;@endif">
      <tr>	       
	  <td align="left" width="20%" style="border: 0px none ! important; vertical-align: top;"><img src="{{url('/public/images/template_logo.png')}}" style="width:120px"/></td>
	  <td width="65%" style="color:#4d64a1;border:0px!important;text-align:center!important;">
	     <h3 style="font-family: times of romen; font-weight: 600; color: rgb(77, 100, 161); margin: 0px; font-size: 24px !important;">Interstellar Testing Centre Pvt. Ltd.</h3>
	     <h5 style="font-size:15px;margin:0px;padding:0px;"><b>(Formaly International Testing Centre)</b></h5> 
	     <h5 style="font-size:15px;margin:0px;padding:0px;"><b>(A Government Approved Test House)</b></h5> 
	     <h5 style="font-size:15px;margin:0px;padding:0px;"><b>86, Industrial Area, Phase-1, Panchkula-134109 (Haryana)</b></h5>
	     <p style="font-size:14px;margin:0px!important;padding:0px!important;">Phone : (O) 0172-2561543, 2565825</p>
	     <p style="font-size:14px;margin:0px!important;padding:0px!important;">Visit us : <span style="text-decoration:underline;margin:0px!important;padding:0px!important;">www.itclabs.com</span>&nbsp; <b>Email :</b> customersupport@itclabs.com</p>
	     <p style="font-size:14px;margin:0px!important;padding:0px!important;"><b>[Lic. No. Lab-3D(1)88] / Lic. 2-ISM-HR</b></p>
	     <h5 style="font-size:15px;margin:0px!important;padding:0px!important;"><b style="margin:0px!important;padding:0px!important;">(The Drugs and Cosmetics Act 1940 and the Rules thereunder)</b></h5> 
	  </td>
	  <td align="right" width="15%" style="border: 0px none ! important; color: #d7563a; vertical-align: top; padding: 5px;font-size: 12px ! important;">
	     <img style="display: block;" src="{{url('/public/images/pharma-logo-right.jpg')}}" width="100px" />
	     <div style="color: rgb(138, 47, 48);width: auto;font-weight: bold;border: 2px solid rgb(138, 47, 48);font-size: 14px;float: right;margin-right: 12px;padding: 0 4px;">FORM 50</div>
	  </td>
      </tr>
      <tr>
	 <td colspan="6">
	    <table width="100%" style="margin-bottom:20px!important;">
	       <tr>
		  <td width="33.3%" align="left"></td>
		  <td width="33.3%" align="center">
		     <b style="display:block; background: rgb(138, 47, 48);margin:auto; color: rgb(255, 255, 255); font-size: 15px;width: 100px;">
		     Test Report
		     @if(!empty($hasContainHeaderFooter) && $hasContainHeaderFooter == '2')
		     (DRAFT)
		     @endif
		     </b>
		  </td>
		  <td width="33.3%" align="right"></b></td>
	       </tr>
	    </table>
	 </td>
      </tr>
   </table>
</div>
<!--- header end-->

<!--- footer start-->
<div id="footer">
   <table valign="bottom" width="100%" style="margin:0 auto;border-collapse:collapse;">
      <tr>
	 <td align="center" colspan="6" style="margin-top: 0px!important;">
	     <b style="text-align:center;">
	     <script type='text/php'>
	     if(isset($pdf)){ 
		$font = $fontMetrics->get_font('serif','bold');
		$size = 11;
		$y    = $pdf->get_height() - 50;
		$x    = $pdf->get_width() - 305 - $fontMetrics->get_text_width('1/1', $font, $size);
		$pdf->page_text($x, $y, 'Page {PAGE_NUM} of {PAGE_COUNT}', $font, $size);
	     }
	    </script>
	    </b>
	 </td>
      </tr>
      <tr>
	 <td align="left" colspan="6" @if(!empty($hasContainHeaderFooter) && $hasContainHeaderFooter == '3')style="visibility:hidden;"@endif>
	    <table width="100%" style="margin-top: 20px!important;">
	       <tr>
		  <td align="left" width="4%"><b style="font-size:8px !important;float: left;vertical-align:top;">Note :</b></td>
		  <td colspan="5" align="left" width="94%">
		     <b style="font-size:8px !important;display:inline-block !important;">
		     1.Sample(s) not drawn by us unless otherwise stated.
		     &nbsp;2.Total Liability of this Laboratory is lifted to the Invoiced amount. Sample consumed during test.
		     &nbsp;3.Test certificates in full or parts shall not be used for promotional or Publicity purpose.
		     &nbsp;4.The sample will be destroyed after one month of the date of issued test report, unless, otherwise specified.
		     </b>
		  </td>
	       </tr>
	    </table>
	 </td>
      </tr>
   </table>
</div>
<!--- footer start-->

<body>
   <!--content-->
   <div id="content">
      <table width="100%" class="pdftable" style="margin:0 auto;border-collapse:collapse;">
	 <tbody>
	    <tr>
	      <td colspan="6" style="padding:0px;">
		 <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		    <tr>
		       <td style="padding:0px;" align="left" colspan="2"><b style="display: inline-block;vertical-align: middle;width: 100px;">Sample Name</b><b>:</b><b>{{!empty($viewData['order']['sample_description']) ? $viewData['order']['sample_description'] : ''}}</b></td>
		       <!--<td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Report No.</b><b>:</b>{{!empty($viewData['order']['report_no']) ? $viewData['order']['report_no'] : ''}}{{ !empty($viewData['order']['is_amended_no']) ? ' - '.$viewData['order']['is_amended_no'] : '' }}</td>-->
		    </tr>
		 </table>
	      </td>
	    </tr>				
	    <tr>
	      <td colspan="6" style="padding:0px;">
		 <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		    <tr>
		       <td style="padding:0px;" align="left" width="66.7%"><b style="display: inline-block;vertical-align: middle;vertical-align: middle;width: 100px;">Supplied By</b><b>:</b>{{!empty($viewData['order']['supplied_by']) ? $viewData['order']['supplied_by'] : '' }}</td>
		       <td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Report Date</b><b>:</b>{{!empty($viewData['order']['report_date']) ?  date(DATEFORMAT,strtotime($viewData['order']['report_date'])) : ''}}</td>
		    </tr>
		 </table>
	      </td>
	    </tr>				
	    <tr>
	      <td colspan="6" style="padding:0px;">
		 <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		    <tr>
		       <td style="padding:0px;" align="left" width="66.7%"><b style="display: inline-block;vertical-align: middle;width: 100px;">Manufactured By</b><b>:</b>{{!empty($viewData['order']['manufactured_by']) ?  $viewData['order']['manufactured_by'] : ''}}</td>
		       <td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Report No.</b><b>:</b>{{!empty($viewData['order']['order_no']) ?  $viewData['order']['order_no'] : ''}}{{ !empty($viewData['order']['is_amended_no']) ? '-'.$viewData['order']['is_amended_no'] : '' }}</td>
		    </tr>
		 </table>
	      </td>
	    </tr>				
	    <tr>
	      <td colspan="6" style="padding:0px;">
		 <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		    <tr>
		       <td style="padding:0px;" align="left" width="66.7%"><b style="display: inline-block;vertical-align: middle;width: 100px;">Submitted By</b><b>:</b>{{!empty($viewData['order']['customer_name']) ? $viewData['order']['customer_name'] : ''}}</td>
		       <td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Booking Date</b><b>:</b>{{!empty($viewData['order']['order_date']) ?  date(DATEFORMAT,strtotime($viewData['order']['order_date'])) :''}}</td>
		    </tr>			 
		 </table>
	      </td>
	    </tr>
	    <tr>
	       <td colspan="6" style="padding:0px;">
		  <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		     <tr>
			<td style="padding:0px;" align="left" width="66.7%"><b style="display: inline-block;vertical-align: middle;width: 100px;">Address</b><b>:</b>{{!empty($viewData['order']['customer_name']) ? $viewData['order']['customer_name'] : ''}}-{{!empty($viewData['order']['customer_address']) ? $viewData['order']['customer_address'] : ''}}</td>
		     </tr>
		  </table>
	       </td>
	    </tr>
	    <tr>
	       <td colspan="6" style="padding:0px;">
		  <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		     <tr>
			<td style="padding:0px;" align="left" width="66.7%"><b style="display: inline-block;vertical-align: middle;width: 100px;">Mfg. Lic. No.</b><b>:</b>{{!empty($viewData['order']['mfg_lic_no']) ? $viewData['order']['mfg_lic_no'] : ''}}</td>
			<td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Party Ref. No.</b><b>:</b>{{!empty($viewData['order']['reference_no']) ?  $viewData['order']['reference_no'] : ''}}</td>
		     </tr>
		  </table>
	       </td>
	    </tr>
	    <tr>
	       <td colspan="6" style="padding:0px;">
		  <table width="100%" border="1" style="border-bottom:0px!important;border-collapse:collapse">
		    <tr>
		       <td align="left" style="padding:0px;" width="33.3%"><b style="display: inline-block;vertical-align: middle;width: 100px;">Batch No.</b><b>:</b>{{!empty($viewData['order']['batch_no']) ?  $viewData['order']['batch_no'] : ''}} </td>
		       <td align="left" style="padding:0px;" width="33.3%"><b style="display: inline-block;vertical-align: middle;width: 60px;">Batch Size</b><b>:</b>{{!empty($viewData['order']['batch_size']) ? $viewData['order']['batch_size'] :'' }}</td>
		       <td style="padding:0px;"><b style="display: inline-block;vertical-align: middle;width: 88px;">Party Ref. Date</b><b>:</b>{{!empty($viewData['order']['letter_no']) ?  $viewData['order']['letter_no'] : ''}}</td>
		    </tr>
		  </table>
	       </td>
	    </tr>				      
	    <tr>
	      <td colspan="6" style="padding:0px;">
		 <table width="100%" border="1" style="border-collapse:collapse">
		    <tr>
		       <td align="left" style="padding:0px;" width="33.3%"><b style="display: inline-block;vertical-align: middle;width: 100px;">D/M</b><b>:</b>{{!empty($viewData['order']['mfg_date']) ? $viewData['order']['mfg_date'] : '-'}}</td>
		       <td align="left" style="padding:0px;" width="33.3%"><b style="display: inline-block;vertical-align: middle;width: 60px;">D/E</b><b>:</b>{{!empty($viewData['order']['expiry_date']) ? $viewData['order']['expiry_date'] : '-'}}</td>
		       <td align="left" style="padding:0px;" width="33.3%"><b style="display: inline-block;vertical-align: middle;width: 88px;">Sample Qty</b><b>:</b>{{!empty($viewData['order']['sample_qty']) ? $viewData['order']['sample_qty'] : ''}}</td>
		    </tr>
		 </table>
	      </td>
	    </tr>
	      
	    @if(!empty($viewData['order']['header_note']))
	    <tr>
	       <td colspan="6" style="padding:0px;">
		  <table width="100%">
		     <tr>
			<td align="center" width="50%"><b style="margin:0px;padding:0px;">{{!empty($viewData['order']['header_note']) ? ucwords($viewData['order']['header_note']) : '-'}}</b></td>
		     </tr>
		  </table>
	       </td> 
	    </tr>  
	    @endif
	 </tbody>
      </table>
      
      <?php $colspanCounter = empty($notContainEquipment) ? 6 : 5 ;?>
      
      <table width="100%" border="1" class="pdftable" style="margin:0 auto;border-collapse:collapse;margin-top:10px!important;">
	 
	 <tr>
	    <td align="left" colspan="{{$colspanCounter}}">
	       <b style="padding-top:7px!important;padding-bottom:7px!important;font-size:14px!important;display: inline-block;vertical-align: middle;">PART C : TEST RESULTS </b>
	    </td>
	 </tr>
	    
	 <tr>
	    <th align="center" style="width:5%!important;">S.No.</th>
	    <th align="center" style="width:35%!important;">Test Parameter</th>
	    @if(empty($notContainEquipment))
	    <th align="center" style="width:15%!important;">Inst. Used</th>
	    @endif
	    <th align="center" style="{{ empty($notContainEquipment) ? 'width:15%!important;' : 'width:20%!important'}}">Method</th>
	    <th align="center" style="{{ empty($notContainEquipment) ? 'width:15%!important;' : 'width:20%!important'}}">Requirement</th>
	    <th align="center" style="{{ empty($notContainEquipment) ? 'width:19%!important;' : 'width:24%!important'}}">Result</th>
	 </tr>
	    
	 <tr>
	    <td colspan="{{$colspanCounter}}" style="text-align:left;padding: 5px;">
	       <b>Test Details :</b>&nbsp;<span>{{!empty($viewData['order']['header_note']) ? ucfirst($viewData['order']['header_note']) : '' }}</span>
	    </td>
	 </tr>
	 
	 @if(!empty($viewData['orderParameters']))
	    
	    <?php $pageBreakCounter = 1; $page=1;?>	    
    
	    @foreach($viewData['orderParameters'] as $key => $orderParameterCategoryName)
	       
	       @if($pageBreakCounter % 35 == 0)
	       </table>
	       <div class="page-break" ><?php $page++; $pageBreakCounter++;?></div>
	       <table width="100%" border="1" class="pdftable" style="margin:0 auto;border-collapse:collapse;margin-top:10px!important;">
	       @endif
	       
	       <tr data="{{$pageBreakCounter}}">
		  <td class="category" align="center">{{$key+1}}.</td>
		  <td class="category" align="left" colspan="{{$colspanCounter-1}}" style="padding:0 5px;">{{trim($orderParameterCategoryName['categoryName'])}}</td>
	       </tr>
	       
	       <?php $page++; $pageBreakCounter++;?>
	       
	       @if(!empty($orderParameterCategoryName['categoryParams']))
		  <?php $charNum = 'a';?>
		  @foreach($orderParameterCategoryName['categoryParams'] as $orderParaKey => $orderParameterCategoryParameters)
		     <tr>
			<td class="parameter" align="center">{{ $charNum++ }}.</td>
			<td class="parameter" align="left"><?php echo trim($orderParameterCategoryParameters['test_parameter_name']);?></td>
			@if(!empty($orderParameterCategoryParameters['description']))
			   <td  class="text-justify parameter" colspan="{{$colspanCounter-2}}" align="left" style="padding:0 15px;">{{!empty($orderParameterCategoryParameters['description']) ? trim($orderParameterCategoryParameters['description']) : ''}} </td>
			@else
			   @if(empty($notContainEquipment))
			   <td class="equipmentName" align="center">{{!empty($orderParameterCategoryParameters['equipment_name']) ? trim($orderParameterCategoryParameters['equipment_name']) : '-'}}</td>
			   @endif
			   <td class="methodName" align="center">{{!empty($orderParameterCategoryParameters['method_name']) ? trim($orderParameterCategoryParameters['method_name']) : '-'}}</td>
			   <td class="requirementName" align="center">{{!empty($orderParameterCategoryParameters['requirement_from_to']) ? trim($orderParameterCategoryParameters['requirement_from_to']) : '-'}}</td>
			   <td class="testResult" align="left">{{!empty($orderParameterCategoryParameters['test_result']) ? trim($orderParameterCategoryParameters['test_result']) :'-'}}</td>
			@endif		     
		     </tr>
		     
		     @if($pageBreakCounter % 35 == 0)
		     </table>
		     <div class="page-break" ><?php $page++; $pageBreakCounter++;?></div>
		     <table width="100%" border="1" class="pdftable" style="margin:0 auto;border-collapse:collapse;margin-top:10px!important;">
		     @endif
		  
		  <?php $page++; $pageBreakCounter++;?>
		  @endforeach				    
	       @endif
	    @endforeach
	 @endif
      </table>
	 
      <table width="100%" class="pdftable" style="width:100%;border-collapse:collapse;margin-top:20px!important;">	 
	 @if(!empty($viewData['order']['note_value']))
	 <tr>
	    <td width="100%" colspan="3" style="padding: 5px 0px !important;">
	       <p style="padding: 5px 0;font-size:14px;display: inline-block;vertical-align: middle;"><b> NOTE </b><b>: </b>{{!empty($viewData['order']['note_value']) ? $viewData['order']['note_value'] : ''}}
	    </td>
	 </tr>
	 @endif
	 <?php $testStdValue = !empty($viewData['order']['test_standard_value'])? $viewData['order']['test_standard_value']:''; ?>
	 @if(!empty($viewData['order']['remark_value']))
	 <tr>
	    <td width="100%" align="left" style="padding: 5px 0px !important; border-bottom: 1px solid ! important; border-top: 1px solid ! important;overflow-wrap: break-word;word-wrap: break-word;vertical-align: middle;">{{!empty($viewData['order']['remark_value']) ? $viewData['order']['remark_value'].$testStdValue : ''}}</td>
	 </tr>
	 @endif		     
      </table>
      
      <table class="bottom-sign pdftable" width="100%" style="border-bottom: 1px solid;">
	 <tr>
	    <td width="33.3%" align="left" valign="bottom">
	       @if(!empty($viewData['order']['hasMicrobiologicalEquipment']))
	       <p style="font-size:10px;padding-top:-5px!important;">
	       <span style="float:right;width:100%;@if(!empty($hasContainHeaderFooter) && in_array($hasContainHeaderFooter,array('2','3')))visibility:hidden;@endif"><img style="width:70px;height:30px;padding-bottom:-6px!important;" alt="{{$viewData['order']['hasMicrobiologicalEquipment']}}" src="{{DOC_ROOT.SIGN_PATH.str_replace(' ','_',strtolower($viewData['order']['hasMicrobiologicalEquipment'])).'.png'}}"/></span>
	       </p>
	       <p style="font-size:10px;padding-top:-5px!important;">{{!empty($viewData['orderTrackRecord']['reviewing']['report_view_date']) ? date(DATEFORMAT,strtotime($viewData['orderTrackRecord']['reviewing']['report_view_date'])) : '-'}}</p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>{{$viewData['order']['hasMicrobiologicalEquipment']}}</b></p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>[Tech Manager (Micro.)]</b></p>
	       @endif
	    </td>
	    <td width="33.3%" align="center" valign="bottom">
	       <p style="font-size:10px;padding-top:-5px!important;">
	       @if(!empty($viewData['orderTrackRecord']['reviewing']['user_signature']) && file_exists(DOC_ROOT.SIGN_PATH.$viewData['orderTrackRecord']['reviewing']['user_signature']))
	       <span style="display:inline-block;width:100%;@if(!empty($hasContainHeaderFooter) && in_array($hasContainHeaderFooter,array('2','3')))visibility:hidden;@endif"><img style="width:70px;height:30px;padding-top:-5px!important;" alt="{{$viewData['orderTrackRecord']['reviewing']['user_signature']}}" src="{{DOC_ROOT.SIGN_PATH.$viewData['orderTrackRecord']['reviewing']['user_signature']}}"/></span></br>
	       @endif
	       {{$viewData['orderTrackRecord']['reviewing']['username'] ? $viewData['orderTrackRecord']['reviewing']['username'] : '-'}}
	       </p>
	       <p style="font-size:10px;padding-top:-5px!important;">{{!empty($viewData['orderTrackRecord']['reviewing']['report_view_date'] ) ? date(DATEFORMAT,strtotime($viewData['orderTrackRecord']['reviewing']['report_view_date'] )) : '-'}}</p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>Reviewer</b></p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>*****End Of Report*****</b></p>
	    </td>
	    <td width="33.3%" align="right" valign="bottom">
	       <p style="font-size:10px;padding-top:-5px!important;">
	       @if(!empty($viewData['orderTrackRecord']['finalizing']['user_signature']) && file_exists(DOC_ROOT.SIGN_PATH.$viewData['orderTrackRecord']['finalizing']['user_signature']))
	       <span style="float:right;width:100%;@if(!empty($hasContainHeaderFooter) && in_array($hasContainHeaderFooter,array('2','3')))visibility:hidden;@endif"><img style="width:70px;height:30px;padding-bottom:-6px!important;" alt="{{$viewData['orderTrackRecord']['finalizing']['user_signature']}}" src="{{DOC_ROOT.SIGN_PATH.$viewData['orderTrackRecord']['finalizing']['user_signature']}}"/></span>
	       @endif
	       <span style="display:inline-block;width:100%;padding-top:-1px!important;">{{!empty($viewData['orderTrackRecord']['finalizing']['report_view_date'] ) ? date(DATEFORMAT,strtotime($viewData['orderTrackRecord']['finalizing']['report_view_date'] )) : '-'}}</span>
	       </p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>{{!empty($viewData['orderTrackRecord']['finalizing']['username']) ? $viewData['orderTrackRecord']['finalizing']['username'] : '-'}}</b></p>
	       <p style="font-size:13px;padding-top:-5px!important;"><b>[Tech Manager]</b></p>
	    </td>
	 </tr>
      </table>     
   </div>
   <!--/content-->
</body>
</html>